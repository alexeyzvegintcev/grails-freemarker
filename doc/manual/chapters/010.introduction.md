Title:			Title  
Subtitle:		Subtitle  
Author:			Ken E Roberts  
Affiliation:	9ci, Inc.  
Date:			February 27, 2012  
Copyright:		2012 Ken E Roberts.  
				This work is licensed under a Creative Commons License.  
				http://creativecommons.org/licenses/by-sa/2.5/
Keywords:		
CSS:            ../css/main.css
CSS:			../css/menu.css
CSS:			../css/pdf.css
CSS:			../css/ref.css

# Introduction #

With this plugin you can use the
[Grails Tag Libraries](http://grails.org/doc/latest/guide/single.html#6.3%20Tag%20Libraries) in
[FreeMarker](http://freemarker.sourceforge.net/) templates. No JSP tag libraries are involved at
all, the plugin connects FreeMarker to Grails TagLibs system as directly as possible.

## Quick Simple Example ##

Create your Grails application

Install the plugin

<div class="code">
	grails install-plugin freemarker
</div>

Assuming you have a controller called FreemakerCon

Add new actions to your *grails-app/controllers/test/freemaker/prj/MyUserController.groovy*

<div class="code">
	class DemoController {
		def index = {
			render view: 'index.ftl', model: [name: 'Jeff Beck', instrument: 'Guitar']
		}
	}  
</div>

Then you could define a FreeMarker template in grails-app/views/demo/index.ftl that looks like this:

<div class="code">
	&lt;#ftl />
	&lt;html>
	&lt;body>
		Name: ${name} <br/>
		Instrument: ${instrument}<br/>
	&lt;/body>
	&lt;/html>
</div>

Use your browser to navigate to [http://localhost:8080/test-freemaker-prj/myUser/login]()

Done!

<p class="note">
In FreeMarker templates, you can use &lt; > or \[ ]. For more information, please consult
<a href="http://freemarker.sourceforge.net/docs/app_faq.html#faq_alternative_syntax">Freemarker FAQ</a> about alternative
syntax.
</p>

<p class="warning">
Be aware that FreeMarker syntax differs from GSP syntax (they are different beasts).
</p>

## Grails Taglib Example ##

Create your Grails application

Assuming you have a domain class as follows:

<div class="code">
	class MyUser{
		String username
		String password

		static constraints = {
			username(unique: true, blank: false)
			password(blank: false)
		}
	}
</div>

Create a controller *MyUserController.groovy*

<div class="code">
	def login = {
		def myUserInstance = new MyUser()
		render(view: "login", model: [myUserInstance: myUserInstance])
	}

	def doLogin = {
		def myUserInstance = new MyUser(params)
 
		boolean ok = myUserInstance.validate(['password']) 
		if (ok) {
			if (!myUserInstance.username || !myUserInstance.password || !myUserInstance.password.equals("pass")) {
				flash.message = "${message(code: 'Invalid password or username', args: [])}"
				ok = false
			}
		}

		if (ok) {
			redirect(action: "index")
		} else {
			myUserInstance.password = null
			render(view: "login", model: [myUserInstance: myUserInstance])
		}
	}
</div>

Create your *grails-app/views/myUser/login.ftl*

<div class="code">
	&lt;#ftl />
	&lt;html>
		&lt;head>
			&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
			&lt;meta name="layout" content="main" />
		&lt;/head>
		&lt;body>
			&lt;div class="body">
				&lt;#if flash.message?exists>&lt;div class="message">${flash.message}&lt;/div>&lt;/#if>
				&lt;@g.hasErrors bean=myUserInstance>
					&lt;div class="errors">
						&lt;@g.renderErrors bean=myUserInstance _as="list" />
					&lt;/div>
				&lt;/@g.hasErrors> 
				&lt;@g.form action="doLogin" method="post">
					&lt;div class="dialog">
						&lt;table>
							&lt;tr class="prop">
								&lt;td valign="top" class="name">
									&lt;label for="username">&lt;@g.message code="myUser.username.label" default="Username" />&lt;/label>
								&lt;/td>
								&lt;td valign="top" class="value ${g.hasErrors({'bean': myUserInstance, 'field': 'username'}, 'errors')}">
									&lt;@g.textField name="username" value=myUserInstance.username />
								&lt;/td>
							&lt;/tr>	  
							&lt;tr class="prop">
								&lt;td valign="top" class="name">
									&lt;label for="password">&lt;@g.message code="myUser.password.label" default="Password" />&lt;/label>
								&lt;/td>
								&lt;td valign="top" class="value ${g.hasErrors({'bean': myUserInstance, 'field': 'password'}, 'errors')}">
									&lt;@g.passwordField name="password" value=myUserInstance.password />
								&lt;/td>
							&lt;/tr>
						&lt;/table>
					&lt;/div>
					&lt;div class="buttons">
						&lt;span class="button">&lt;@g.submitButton name="submit" value="${g.message({'code': 'default.button.login.label', 'default': 'Login'})}" />&lt;/span>
					&lt;/div>
				&lt;/@g.form>
			&lt;/div>
		&lt;/body>
	&lt;/html>
</div>

Use your browser to navigate to [http://localhost:8080/test-freemaker-prj/myUser/login]()

Done!

<p class="note">
In FreeMarker templates, you can use &lt; > or \[ ]. For more information, please consult 
<a href="http://freemarker.sourceforge.net/docs/app_faq.html#faq_alternative_syntax">Freemarker FAQ</a>
about alternative syntax.
</p>

<p class="warning">
Be aware that FreeMarker syntax differs from GSP syntax (they are different beasts).
</p>
